(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b706141"],{"0a96":function(e,t,s){"use strict";var r=s("b91d"),a=s.n(r);a.a},"40a1":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("Top")],1),s("el-container",[s("el-main",[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[s("el-input",{ref:"username",model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),s("el-form-item",{attrs:{label:"性别",prop:"region"}},[s("el-select",{ref:"gender",attrs:{placeholder:"请选择性别"},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[s("el-option",{attrs:{label:"男",value:"0"}}),s("el-option",{attrs:{label:"女",value:"1"}})],1)],1),s("el-form-item",{attrs:{label:"电话",prop:"phone"}},[s("el-input",{ref:"phone",model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{ref:"email",model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存信息")]),s("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},a=[],o=s("2c4e"),i=s("a16d"),l=s("365c"),n={data(){return{labelPosition:"on-border",userShow:"",userPhone:"",userSex:"",ruleForm:{userName:"",gender:0,phone:"",email:""},rules:{userName:[{message:"请输入您的账户",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}],phone:[{message:"请输入您的电话号码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{message:"请输入您的邮箱",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确的邮箱",trigger:"blur"}]}}},created(){this.ruleForm.userName=null==this.$store.state.user.user_name?"":this.$store.state.user.user_name,this.ruleForm.phone=null==this.$store.state.user.phone?"":this.$store.state.user.phone,this.ruleForm.email=null==this.$store.state.user.email?"":this.$store.state.user.email,this.ruleForm.gender=null==this.$store.state.user.gender?"":this.$store.state.user.gender},methods:{submitForm(){this.$refs["ruleForm"].validate(e=>{if(e){const e=this.$store.state.user.id,t=this.ruleForm.userName,s=this.ruleForm.gender,r=this.ruleForm.phone,a=this.ruleForm.email,i=this.$store.state.user.user_role,n=this.$store.state.user.user_status,u=this.$store.state.user.token;Object(l["w"])(e,t,s,r,a,i,n,u).then(e=>{2e3===e.code?(o["a"].open({message:"更新成功!",position:"is-top"}),this.$store.state.user.user_name=t,this.$store.state.user.gender=s,this.$store.state.user.phone=r,this.$store.state.user.email=a,this.$router.push("/userhome")):o["a"].open({message:"更新失败!",position:"is-top"})})}else o["a"].open({message:"请正确填写信息!",position:"is-top"})})},resetForm(){this.ruleForm.userName="",this.ruleForm.phone="",this.ruleForm.email="",this.ruleForm.gender=""},secend(){this.$store.commit("secend",{userShow:this.userShow,userPhone:this.userPhone,userSex:this.userSex}),""!=this.$store.state.registeruser.userPhone&&""!=this.$store.state.registeruser.userShow&&""!=this.$store.state.registeruser.userSex?o["a"].open("保存成功"):this.$buefy.snackbar.open({duration:5e3,message:"请填写完整信息",type:"is-danger",position:"is-bottom-left",actionText:"确定",queue:!1,onAction:()=>{this.$buefy.toast.open({message:"信息填写完整再点击保存",queue:!1})}})}},components:{Top:i["a"]}},u=n,c=(s("0a96"),s("2877")),m=Object(c["a"])(u,r,a,!1,null,"3be5db18",null);t["default"]=m.exports},a16d:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar is-light",attrs:{role:"navigation","aria-label":"main navigation"}},[r("div",{staticClass:"navbar-brand"},[r("div",{staticClass:"demo-image"},[r("div",{staticClass:"block"},[r("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:s("a5d2"),fit:e.contain}})],1)]),e._m(0)]),r("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[r("div",{staticClass:"navbar-start"},[r("a",{staticClass:"navbar-item",on:{click:e.getMainPosts}},[e._v("首页")]),r("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[r("a",{staticClass:"navbar-link"},[e._v("更多")]),r("div",{staticClass:"navbar-dropdown"},[r("a",{staticClass:"navbar-item",on:{click:e.userhome}},[e._v("个人主页")]),r("a",{staticClass:"navbar-item",on:{click:e.allart}},[e._v("全部帖子")]),r("a",{directives:[{name:"show",rawName:"v-show",value:1===e.$store.state.user.user_role,expression:"$store.state.user.user_role === 1"}],staticClass:"navbar-item",on:{click:e.manager}},[e._v("后台管理")]),r("hr",{staticClass:"navbar-divider"})])]),r("div",{staticClass:"level-left"},[e._m(1),r("div",{staticClass:"level-item"},[r("div",{staticClass:"field has-addons"},[r("p",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.Search,expression:"Search"}],staticClass:"input",attrs:{type:"text",placeholder:"Find a post"},domProps:{value:e.Search},on:{input:function(t){t.target.composing||(e.Search=t.target.value)}}})]),r("p",{staticClass:"control"},[r("button",{staticClass:"button",on:{click:e.searchPosts}},[e._v("搜索")])])])])])]),e.$store.state.isLogin?e.$store.state.isLogin?r("div",{staticClass:"navbar-brand"},[r("div",{staticClass:"navbar-item"},[r("el-row",{attrs:{gutter:"50"}},[r("el-col",{attrs:{span:6}},[r("img",{staticClass:"el-avatar--circle",attrs:{src:""+e.$store.state.user.avatar_url,sizes:"40",onerror:"this.src='http://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png';this.οnerrοr=null"}})]),r("el-col",{attrs:{span:8}},[r("h2",[e._v(e._s(e.$store.state.user.user_name))])]),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{size:"small",round:"",type:"primary"},on:{click:e.logout}},[r("i",{staticClass:"fas fa-sign-out-alt"},[e._v("登出")])])],1)],1)],1)]):e._e():r("div",{staticClass:"navbar-end"},[r("div",{staticClass:"navbar-item"},[r("div",{staticClass:"buttons"},[r("b-button",{attrs:{type:"is-info",outlined:""},on:{click:e.register}},[e._v("注册")]),r("div",{staticClass:"navbar-menu"},[r("div",{staticClass:"navbar-end"},[r("b-dropdown",{attrs:{position:"is-bottom-left","aria-role":"menu","trap-focus":""}},[r("a",{staticClass:"navbar-item",attrs:{slot:"trigger",role:"button"},slot:"trigger"},[r("b-button",{attrs:{type:"is-info",outlined:""}},[e._v("登录")])],1),r("b-dropdown-item",{attrs:{"aria-role":"menu-item",focusable:!1,custom:"",paddingless:""}},[r("div",{staticClass:"modal-card",staticStyle:{width:"300px"}},[r("section",{staticClass:"modal-card-body"},[r("b-field",{attrs:{label:"用户账户"}},[r("b-input",{attrs:{type:"text",placeholder:"请输入您的账户",required:""},model:{value:e.userAccount,callback:function(t){e.userAccount=t},expression:"userAccount"}})],1),r("b-field",{attrs:{label:"密码"}},[r("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Your password",required:""},model:{value:e.userPassword,callback:function(t){e.userPassword=t},expression:"userPassword"}})],1),r("b-checkbox",[e._v("记住我")])],1),r("footer",{staticClass:"modal-card-foot"},[r("button",{staticClass:"button is-primary",on:{click:e.login}},[e._v("登录")])])])])],1)],1)])],1)])])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"level-item"},[s("p",{staticClass:"subtitle is-5"})])}],o=s("365c"),i={data(){return{userAccount:"",userPassword:"",Search:""}},methods:{getMainPosts(){this.$router.push("/")},errorHandler(){return!0},searchPosts(){this.$router.push({path:"/allsearchhome",query:{search:JSON.stringify(this.Search)}})},allart(){this.$router.push("/allarticlehome")},manager(){this.$router.push("/backstagehome")},logout(){this.$store.commit("logout")},userhome(){this.$router.push("/userhome")},login(){Object(o["x"])(this.userAccount,this.userPassword).then(e=>{const{data:t}=e;this.user=t,console.log(t),null!=t?this.$store.dispatch("aLogin",{user:t,message:"用户登录",success:()=>{1===this.$store.state.user.user_role&&this.$router.push("backstagehome"),console.log("欢迎您")}}):alert("该用户不存在")}).catch(()=>{})},register(){this.$router.push("/registerhome")}}},l=i,n=s("2877"),u=Object(n["a"])(l,r,a,!1,null,null,null);t["a"]=u.exports},a5d2:function(e,t,s){e.exports=s.p+"img/titlelogo.73ff1d0b.png"},b91d:function(e,t,s){}}]);
//# sourceMappingURL=chunk-2b706141.9b6e3909.js.map